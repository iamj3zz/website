<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} - {{ site.title }}</title>
  <meta name="description" content="{{ site.description }}">
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  <link href="https://fonts.googleapis.com/css2?family=Arial&display=swap" rel="stylesheet">
</head>
<body>
  <header class="site-header">
    <div class="site-logo">
      <a href="{{ '/' | relative_url }}">
        <img src="{{ site.logo | relative_url }}" alt="{{ site.title }}">
      </a>
    </div>
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    <nav class="main-nav">
      <ul>
        <li><a href="{{ '/bio/' | relative_url }}" {% if page.url contains '/bio' %}class="active"{% endif %}>BIO</a></li>
        <li><a href="{{ '/works/' | relative_url }}" {% if page.url contains '/works' %}class="active"{% endif %}>WORKS</a></li>
        <li><a href="{{ '/events/' | relative_url }}" {% if page.url contains '/events' %}class="active"{% endif %}>EVENTS</a></li>
        <li><a href="{{ '/contact/' | relative_url }}" {% if page.url contains '/contact' %}class="active"{% endif %}>CONTACT</a></li>
      </ul>
    </nav>
  </header>

  <main class="site-content">
    <article class="work-detail">
      <div class="work-header">
        {% comment %} Display all categories if multiple, otherwise single category {% endcomment %}
        {% if page.categories %}
          <p class="work-category">
            {% for cat in page.categories %}
              {{ cat | replace: '-', ' ' | upcase }}{% unless forloop.last %} + {% endunless %}
            {% endfor %}
          </p>
        {% elsif page.category %}
          <p class="work-category">{{ page.category | replace: '-', ' ' | upcase }}</p>
        {% endif %}
        <h1>{{ page.title }}</h1>
      </div>

      {% comment %} Modular sections system {% endcomment %}
      {% if page.sections %}
        <div class="work-modules">
          {% for section in page.sections %}
            {% include work-modules/{{ section.type }}.html
               content_type=section.content_type
               image=section.image
               alt=section.alt
               caption=section.caption
               title=section.title
               content=section.content
               images=section.images
               captions=section.captions
               columns=section.columns
               platform=section.platform
               video_id=section.video_id
               url=section.url
               height=section.height
               year=section.year
               year_link=section.year_link
               date=section.date
               date_link=section.date_link
               isrc=section.isrc
               isrc_link=section.isrc_link
               upc=section.upc
               upc_link=section.upc_link
               iswc=section.iswc
               iswc_link=section.iswc_link
               location=section.location
               location_link=section.location_link
               performed_in=section.performed_in
               performed_in_link=section.performed_in_link
               places=section.places
               places_link=section.places_link
               produced_by=section.produced_by
               produced_by_link=section.produced_by_link
               client=section.client
               client_link=section.client_link
               commissioned_by=section.commissioned_by
               commissioned_by_link=section.commissioned_by_link
               curated_by=section.curated_by
               curated_by_link=section.curated_by_link
               role=section.role
               role_link=section.role_link
               technology=section.technology
               technology_link=section.technology_link
               collaborators=section.collaborators
               collaborators_link=section.collaborators_link
               credits=section.credits
               credits_link=section.credits_link
               partners=section.partners
               partners_link=section.partners_link
               supporters=section.supporters
               supporters_link=section.supporters_link
               composer_performer_producer=section.composer_performer_producer
               composer_performer_producer_link=section.composer_performer_producer_link
               mastering_by=section.mastering_by
               mastering_by_link=section.mastering_by_link
               artwork_by=section.artwork_by
               artwork_by_link=section.artwork_by_link
               interview=section.interview
               interview_link=section.interview_link
               press_kit=section.press_kit
               press_kit_link=section.press_kit_link
               socials=section.socials
               socials_link=section.socials_link
               special_thanks=section.special_thanks
               special_thanks_link=section.special_thanks_link
               custom=section.custom
               text=section.text
               author=section.author
               embed_code=section.embed_code
               caption=section.caption
               responsive=section.responsive
               aspect_ratio=section.aspect_ratio
               text_title=section.text_title
               text_content=section.text_content
            %}
          {% endfor %}
        </div>
      {% else %}
        {% comment %} Fallback to old structure for backward compatibility {% endcomment %}

        {% comment %} Auto-display metadata from front matter if any metadata fields exist {% endcomment %}
        {% if page.year or page.date or page.isrc or page.upc or page.iswc or page.location or page.performed_in or page.places or page.produced_by or page.client or page.commissioned_by or page.curated_by or page.role or page.technology or page.collaborators or page.credits or page.partners or page.supporters or page.composer_performer_producer or page.mastering_by or page.artwork_by or page.interview or page.press_kit or page.socials or page.special_thanks %}
          <div class="work-modules">
            {% include work-modules/metadata.html
               year=page.year
               year_link=page.year_link
               date=page.date
               date_link=page.date_link
               isrc=page.isrc
               isrc_link=page.isrc_link
               upc=page.upc
               upc_link=page.upc_link
               iswc=page.iswc
               iswc_link=page.iswc_link
               location=page.location
               location_link=page.location_link
               performed_in=page.performed_in
               performed_in_link=page.performed_in_link
               places=page.places
               places_link=page.places_link
               produced_by=page.produced_by
               produced_by_link=page.produced_by_link
               client=page.client
               client_link=page.client_link
               commissioned_by=page.commissioned_by
               commissioned_by_link=page.commissioned_by_link
               curated_by=page.curated_by
               curated_by_link=page.curated_by_link
               role=page.role
               role_link=page.role_link
               technology=page.technology
               technology_link=page.technology_link
               collaborators=page.collaborators
               collaborators_link=page.collaborators_link
               credits=page.credits
               credits_link=page.credits_link
               partners=page.partners
               partners_link=page.partners_link
               supporters=page.supporters
               supporters_link=page.supporters_link
               composer_performer_producer=page.composer_performer_producer
               composer_performer_producer_link=page.composer_performer_producer_link
               mastering_by=page.mastering_by
               mastering_by_link=page.mastering_by_link
               artwork_by=page.artwork_by
               artwork_by_link=page.artwork_by_link
               interview=page.interview
               interview_link=page.interview_link
               press_kit=page.press_kit
               press_kit_link=page.press_kit_link
               socials=page.socials
               socials_link=page.socials_link
               special_thanks=page.special_thanks
               special_thanks_link=page.special_thanks_link
               custom=page.metadata_custom
            %}
          </div>
        {% endif %}

        <div class="work-image">
          <img src="{{ page.image | relative_url }}" alt="{{ page.title }}">
        </div>

        <div class="work-content">
          {{ content }}
        </div>
      {% endif %}

      <div class="work-nav">
        <div class="work-nav-left">
          {% comment %} Find next published work {% endcomment %}
          {% assign next_work = nil %}
          {% assign found_current = false %}
          {% assign sorted_portfolio = site.portfolio | sort: 'order' %}
          {% for work in sorted_portfolio %}
            {% if found_current and work.published != false %}
              {% assign next_work = work %}
              {% break %}
            {% endif %}
            {% if work.url == page.url %}
              {% assign found_current = true %}
            {% endif %}
          {% endfor %}

          {% if next_work %}
            <a href="{{ next_work.url | relative_url }}" class="work-nav-link">
              <span class="nav-arrow">&larr;</span>
              <span class="nav-label">{{ next_work.title }}</span>
            </a>
          {% else %}
            <span class="work-nav-disabled"></span>
          {% endif %}
        </div>

        <div class="work-nav-center">
          <a href="{{ '/works/' | relative_url }}" class="back-to-works">Back to Works</a>
        </div>

        <div class="work-nav-right">
          {% comment %} Find previous published work {% endcomment %}
          {% assign prev_work = nil %}
          {% assign sorted_portfolio_reverse = site.portfolio | sort: 'order' | reverse %}
          {% assign found_current_prev = false %}
          {% for work in sorted_portfolio_reverse %}
            {% if found_current_prev and work.published != false %}
              {% assign prev_work = work %}
              {% break %}
            {% endif %}
            {% if work.url == page.url %}
              {% assign found_current_prev = true %}
            {% endif %}
          {% endfor %}

          {% if prev_work %}
            <a href="{{ prev_work.url | relative_url }}" class="work-nav-link">
              <span class="nav-label">{{ prev_work.title }}</span>
              <span class="nav-arrow">&rarr;</span>
            </a>
          {% else %}
            <span class="work-nav-disabled"></span>
          {% endif %}
        </div>
      </div>
    </article>
  </main>

  <footer class="site-footer">
    <div class="social-links">
      {% if site.bandcamp_username %}
      <a href="https://{{ site.bandcamp_username }}.bandcamp.com" target="_blank" rel="noopener" class="social-icon" aria-label="Bandcamp - {{ site.bandcamp_username }}" title="Bandcamp - {{ site.bandcamp_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 8h8.5l4 8H4l-4-8z" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.soundcloud_username %}
      <a href="https://soundcloud.com/{{ site.soundcloud_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="SoundCloud - {{ site.soundcloud_username }}" title="SoundCloud - {{ site.soundcloud_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 13v4M6 11v6M9 10v7M12 9v8M15 8v9M18 7v10M21 6v11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </a>
      {% endif %}
      {% if site.youtube_username %}
      <a href="https://youtube.com/@{{ site.youtube_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="YouTube - {{ site.youtube_username }}" title="YouTube - {{ site.youtube_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="6" width="20" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
          <path d="M10 9l5 3-5 3V9z" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.vimeo_username %}
      <a href="https://vimeo.com/{{ site.vimeo_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="Vimeo - {{ site.vimeo_username }}" title="Vimeo - {{ site.vimeo_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1.5"/>
          <path d="M10 9l5 3-5 3V9z" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.facebook_username %}
      <a href="https://facebook.com/{{ site.facebook_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="Facebook - {{ site.facebook_username }}" title="Facebook - {{ site.facebook_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 8h3l-1 3h-2v8h-3v-8H9V8h2V6.5C11 4.5 12 3 15 3h2v3h-2c-.5 0-1 .5-1 1V8z" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.instagram_username %}
      <a href="https://instagram.com/{{ site.instagram_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="Instagram - {{ site.instagram_username }}" title="Instagram - {{ site.instagram_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="4" y="4" width="16" height="16" rx="4" stroke="currentColor" stroke-width="1.5"/>
          <circle cx="12" cy="12" r="3.5" stroke="currentColor" stroke-width="1.5"/>
          <circle cx="17.5" cy="6.5" r="0.5" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.twitter_username %}
      <a href="https://twitter.com/{{ site.twitter_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="X (Twitter) - {{ site.twitter_username }}" title="X (Twitter) - {{ site.twitter_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 4l7 9.5M20 4l-7 9.5m0 0L4 20m9-6.5L20 20" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
        </svg>
      </a>
      {% endif %}
      {% if site.linkedin_username %}
      <a href="https://linkedin.com/in/{{ site.linkedin_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="LinkedIn - {{ site.linkedin_username }}" title="LinkedIn - {{ site.linkedin_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 9v10M6 6v.5M10 14v5m0-5c0-2 1-3 3-3s3 1 3 3v5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </a>
      {% endif %}
      {% if site.twitch_username %}
      <a href="https://twitch.tv/{{ site.twitch_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="Twitch - {{ site.twitch_username }}" title="Twitch - {{ site.twitch_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 3l-1 4v13h5v2h3l2-2h4l5-5V3H4zm14 10l-3 3h-4l-2 2v-2H6V5h12v8z" fill="currentColor"/>
          <rect x="13" y="8" width="1.5" height="4" fill="currentColor"/>
          <rect x="9" y="8" width="1.5" height="4" fill="currentColor"/>
        </svg>
      </a>
      {% endif %}
      {% if site.malt_username %}
      <a href="https://www.malt.fr/profile/{{ site.malt_username }}" target="_blank" rel="noopener" class="social-icon" aria-label="Malt - {{ site.malt_username }}" title="Malt - {{ site.malt_username }}">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L3 7v5c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V7l-9-5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      {% endif %}
    </div>
    <div class="copyright">
      <p>&copy; Copyright 2006-2025. All Rights Reserved {{ site.title }}</p>
    </div>
  </footer>

  <!-- Lightbox Modal -->
  <div id="lightbox" class="lightbox">
    <span class="lightbox-close">&times;</span>
    <img class="lightbox-content" id="lightbox-img" alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
    <div class="lightbox-caption" id="lightbox-caption"></div>
    <div class="lightbox-nav">
      <button class="lightbox-prev">&#10094;</button>
      <button class="lightbox-next">&#10095;</button>
    </div>
  </div>

  <script src="{{ '/assets/js/lightbox.js' | relative_url }}"></script>
  <script src="{{ '/assets/js/navigation.js' | relative_url }}"></script>
</body>
</html>
